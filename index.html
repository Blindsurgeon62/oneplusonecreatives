<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Plus One Creatives</title>
    <link rel="stylesheet" href="styles.css">
    <script src="general-photos.js"></script>
    <script src="night-photos.js"></script>
</head>
<body>
    <button class="font-toggle" onclick="toggleFont()" id="fontToggle">Dyslexic? This button might help!</button>
    
    <div class="container">
        <h1>One Plus One Creatives</h1>
        <div class="tagline">Let's do things our future selves will thank us for</div>
        
        <div class="nav">
            <span class="active">Home</span>
            <a href="general-shots.html">General Shots (35mm Film)</a>
            <a href="nightshots.html">Astro/Night (35mm Film)</a>
            <span>Digital</span>
            <a href="tinkering.html">Tinkering/Restorations</a>
            <a href="musings.html">Musings</a>
            <a href="makersshowcase.html">Makers Showcase</a>
        </div>
        
        <div class="content-box">
            <div class="logo-container">
                <img src="slrphotos/logo1.jpg" alt="One Plus One Creatives Logo" class="main-logo">
            </div>
            <p>With this space I am making, I hope to encourage YOU, to go out and find those things that makes you smile.</p>
        </div>
        
        <!-- Random Photo Preview -->
        <div class="content-box">
            <h2>Here's a shot I took of.. actually, I don't know which picture is there. It was randomly chosen when you opened the page! I see a harmony in this, with the photo that happens to load mirroring how I approach this website: unplanned in direction, but deliberate in effort.</h2>
            <div class="random-photo-preview" id="randomPhotoPreview" onclick="openLightboxFromPreview()">
                <img id="previewImage" src="" alt="Random photo">
            </div>
            <div class="photo-info" id="photoInfo"></div>
        </div>
        
        <div class="content-box">
            <p>Genuinely, thanks for taking some time to visit this site. I'm not tracking website analytics since monetization will never be a goal here. Full disclosure—if server costs ever get too high, I'll handle them through YouTube or another side project.</p>
            <p>Since I don't know who is visiting, feel free to let me know! Shoot me an email at <a href="mailto:contact@oneplusonecreatives.com" style="color: #bdc3c7; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#ffffff'; this.style.textDecoration='underline';" onmouseout="this.style.color='#bdc3c7'; this.style.textDecoration='none';">contact@oneplusonecreatives.com</a> just to say hi, ask a question, or if you'd like updates when I add new content.</p>
            <p>I am also active on <a href="https://www.instagram.com/oneplusonecreatives/?hl=en" target="_blank" style="color: #bdc3c7; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#ffffff'; this.style.textDecoration='underline';" onmouseout="this.style.color='#bdc3c7'; this.style.textDecoration='none';">Instagram</a>! over there, I dont always upload the same photos, and nearly all the crops are different from what you'll see here!</p>
        </div>
        
        <div class="copyright">
            © 2025 One Plus One Creatives. All Rights Reserved.
        </div>
    </div>

    <!-- Lightbox container -->
    <div id="lightbox" class="lightbox" onclick="closeLightboxOnBackground(event)">
        <span class="close-lightbox" onclick="closeLightbox()">&times;</span>
        <div class="lightbox-nav prev-btn" onclick="showRandomPhoto(event)">&lsaquo;</div>
        <img id="lightbox-img" src="">
        <div class="lightbox-nav next-btn" onclick="showRandomPhoto(event)">&rsaquo;</div>
        <div class="lightbox-caption" id="lightboxCaption"></div>
    </div>

    <script>
        // Initialize variables
        let allPhotos = [];
        let currentPhoto = null;

        // Wait for all scripts to load
        window.addEventListener('DOMContentLoaded', function() {
            // Check if photo data exists
            if (typeof generalPhotosData !== 'undefined' && typeof nightPhotosData !== 'undefined') {
                // Combine photo data from both galleries
                allPhotos = [
                    ...generalPhotosData.map(p => ({...p, gallery: 'General Shots', galleryUrl: 'general-shots.html'})),
                    ...nightPhotosData.map(p => ({...p, gallery: 'Astro/Night', galleryUrl: 'nightshots.html'}))
                ];
                
                // Show initial random photo
                showRandomPhoto();
            } else {
                console.error('Photo data not loaded. Check that general-photos.js and night-photos.js are loading correctly.');
                // Fallback: hide the photo preview section if data doesn't load
                document.getElementById('randomPhotoPreview').style.display = 'none';
            }
        });

        // Show a random photo
        function showRandomPhoto(event) {
            if (event) {
                event.stopPropagation();
            }
            
            // Make sure we have photos to show
            if (allPhotos.length === 0) {
                console.error('No photos available to display');
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * allPhotos.length);
            currentPhoto = allPhotos[randomIndex];
            
            // Update preview image
            const previewImg = document.getElementById('previewImage');
            if (previewImg && currentPhoto) {
                previewImg.src = currentPhoto.thumb;
                previewImg.onerror = function() {
                    console.error('Failed to load image:', currentPhoto.thumb);
                    // Try another photo if this one fails
                    if (allPhotos.length > 1) {
                        showRandomPhoto();
                    }
                };
            }
            
            // Update photo info
            const photoInfo = document.getElementById('photoInfo');
            if (photoInfo && currentPhoto) {
                photoInfo.innerHTML = `<span class="gallery-source">From <a href="${currentPhoto.galleryUrl}">${currentPhoto.gallery}</a> gallery</span>`;
            }
            
            // Update lightbox if it's open
            if (document.getElementById('lightbox').style.display === 'block') {
                document.getElementById('lightbox-img').src = currentPhoto.full;
                updateLightboxCaption();
            }
        }

        // Open lightbox from preview
        function openLightboxFromPreview() {
            if (!currentPhoto) {
                console.error('No photo selected');
                return;
            }
            
            const lightboxImg = document.getElementById('lightbox-img');
            if (lightboxImg) {
                lightboxImg.src = currentPhoto.full;
                lightboxImg.onerror = function() {
                    console.error('Failed to load full image:', currentPhoto.full);
                };
            }
            
            document.getElementById('lightbox').style.display = 'block';
            document.body.style.overflow = 'hidden';
            updateLightboxCaption();
        }

        // Update lightbox caption
        function updateLightboxCaption() {
            if (!currentPhoto) return;
            
            const captionElement = document.getElementById('lightboxCaption');
            if (!captionElement) return;
            
            let captionHTML = '';
            
            if (currentPhoto.caption) {
                // Fix the caption to handle line breaks properly
                const captionText = currentPhoto.caption.replace(/<br>/g, '<br>');
                captionHTML += captionText + '<br><br>';
            }
            
            captionHTML += `<span class="gallery-source">From <a href="${currentPhoto.galleryUrl}">${currentPhoto.gallery}</a> gallery</span>`;
            
            captionElement.innerHTML = captionHTML;
        }

        // Close lightbox
        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close lightbox when clicking background
        function closeLightboxOnBackground(event) {
            if (event.target.id === 'lightbox') {
                closeLightbox();
            }
        }

        // Font toggle functionality
        function toggleFont() {
            const body = document.body;
            const button = document.getElementById('fontToggle');
            
            if (body.classList.contains('dyslexic-font')) {
                body.classList.remove('dyslexic-font');
                button.textContent = 'Dyslexic? Friendly Font Here!';
            } else {
                body.classList.add('dyslexic-font');
                button.textContent = 'Standard Font';
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('lightbox').style.display === 'block') {
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                    showRandomPhoto();
                }
            }
        });
    </script>
</body>
</html>