<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>One Plus One Creatives - Debug Version</title>
    <link rel="stylesheet" href="styles.css">
    <script src="general-photos.js"></script>
    <script src="night-photos.js"></script>
</head>
<body>
    <button class="font-toggle" onclick="toggleFont()" id="fontToggle">Dyslexic? This button might help!</button>
    
    <!-- Debug Info Box -->
    <div style="background: #333; color: #0f0; padding: 10px; margin: 10px; font-family: monospace; border: 1px solid #0f0;">
        <div>DEBUG MODE - Photo System Status:</div>
        <div id="debugStatus">Loading...</div>
    </div>
    
    <div class="container">
        <h1>One Plus One Creatives</h1>
        <div class="tagline">Let's do things our future selves will thank us for</div>
        
        <div class="nav">
            <span class="active">Home</span>
            <a href="general-shots.html">General Shots (35mm Film)</a>
            <a href="nightshots.html">Astro/Night (35mm Film)</a>
            <span>Digital</span>
            <a href="tinkering.html">Tinkering/Restorations</a>
            <a href="musings.html">Musings</a>
            <a href="makersshowcase.html">Makers Showcase</a>
        </div>
        
        <div class="content-box">
            <div class="logo-container">
                <img src="slrphotos/logo1.jpg" alt="One Plus One Creatives Logo" class="main-logo">
            </div>
            <p>With this space I am making, I hope to encourage YOU, to go out and find those things that makes you smile.</p>
        </div>
        
        <!-- Random Photo Preview -->
        <div class="content-box">
            <h2>Here's a shot I took of.. actually, I don't know which picture is there. It was randomly chosen when you opened the page! I see a harmony in this, with the photo that happens to load mirroring how I approach this website: unplanned in direction, but deliberate in effort.</h2>
            <div class="random-photo-preview" id="randomPhotoPreview" onclick="openLightboxFromPreview()">
                <img id="previewImage" src="slrphotos/logo1.jpg" alt="Random photo">
            </div>
            <div class="photo-info" id="photoInfo">Loading photo info...</div>
        </div>
        
        <div class="content-box">
            <p>Genuinely, thanks for taking some time to visit this site. I'm not tracking website analytics since monetization will never be a goal here. Full disclosure—if server costs ever get too high, I'll handle them through YouTube or another side project.</p>
            <p>Since I don't know who is visiting, feel free to let me know! Shoot me an email at <a href="mailto:contact@oneplusonecreatives.com" style="color: #bdc3c7; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#ffffff'; this.style.textDecoration='underline';" onmouseout="this.style.color='#bdc3c7'; this.style.textDecoration='none';">contact@oneplusonecreatives.com</a> just to say hi, ask a question, or if you'd like updates when I add new content.</p>
            <p>I am also active on <a href="https://www.instagram.com/oneplusonecreatives/?hl=en" target="_blank" style="color: #bdc3c7; text-decoration: none; transition: color 0.3s;" onmouseover="this.style.color='#ffffff'; this.style.textDecoration='underline';" onmouseout="this.style.color='#bdc3c7'; this.style.textDecoration='none';">Instagram</a>! over there, I dont always upload the same photos, and nearly all the crops are different from what you'll see here!</p>
        </div>
        
        <div class="copyright">
            © 2025 One Plus One Creatives. All Rights Reserved.
        </div>
    </div>

    <!-- Lightbox container -->
    <div id="lightbox" class="lightbox" onclick="closeLightboxOnBackground(event)">
        <span class="close-lightbox" onclick="closeLightbox()">&times;</span>
        <div class="lightbox-nav prev-btn" onclick="showRandomPhoto(event)">&lsaquo;</div>
        <img id="lightbox-img" src="">
        <div class="lightbox-nav next-btn" onclick="showRandomPhoto(event)">&rsaquo;</div>
        <div class="lightbox-caption" id="lightboxCaption"></div>
    </div>

    <script>
        // Debug logging
        console.log('=== DEBUG: Script Starting ===');
        
        // Initialize variables
        let allPhotos = [];
        let currentPhoto = null;
        let debugStatus = document.getElementById('debugStatus');
        
        // Update debug status
        function updateDebug(message) {
            console.log('DEBUG:', message);
            if (debugStatus) {
                debugStatus.innerHTML += '<br>' + message;
            }
        }

        // Check what's loaded immediately
        updateDebug('Checking for photo data...');
        updateDebug('generalPhotosData exists: ' + (typeof generalPhotosData !== 'undefined'));
        updateDebug('nightPhotosData exists: ' + (typeof nightPhotosData !== 'undefined'));

        // Wait for all scripts to load
        window.addEventListener('DOMContentLoaded', function() {
            updateDebug('=== DOMContentLoaded Event Fired ===');
            
            // Check if photo data exists
            if (typeof generalPhotosData !== 'undefined') {
                updateDebug('General photos loaded: ' + generalPhotosData.length + ' photos');
            } else {
                updateDebug('ERROR: generalPhotosData is undefined');
            }
            
            if (typeof nightPhotosData !== 'undefined') {
                updateDebug('Night photos loaded: ' + nightPhotosData.length + ' photos');
            } else {
                updateDebug('ERROR: nightPhotosData is undefined');
            }
            
            if (typeof generalPhotosData !== 'undefined' && typeof nightPhotosData !== 'undefined') {
                // Combine photo data from both galleries
                allPhotos = [
                    ...generalPhotosData.map(p => ({...p, gallery: 'General Shots', galleryUrl: 'general-shots.html'})),
                    ...nightPhotosData.map(p => ({...p, gallery: 'Astro/Night', galleryUrl: 'nightshots.html'}))
                ];
                
                updateDebug('Combined photos: ' + allPhotos.length + ' total photos');
                updateDebug('Attempting to show random photo...');
                
                // Show initial random photo
                showRandomPhoto();
            } else {
                updateDebug('ERROR: Cannot combine photo arrays - one or both are undefined');
                // Show placeholder
                document.getElementById('photoInfo').innerHTML = 'Error loading photos - check console';
            }
        });

        // Show a random photo
        function showRandomPhoto(event) {
            updateDebug('showRandomPhoto called');
            
            if (event) {
                event.stopPropagation();
            }
            
            // Make sure we have photos to show
            if (!allPhotos || allPhotos.length === 0) {
                updateDebug('ERROR: No photos available (array empty or undefined)');
                return;
            }
            
            const randomIndex = Math.floor(Math.random() * allPhotos.length);
            currentPhoto = allPhotos[randomIndex];
            
            updateDebug('Selected photo index: ' + randomIndex);
            updateDebug('Photo thumb: ' + currentPhoto.thumb);
            updateDebug('Photo gallery: ' + currentPhoto.gallery);
            
            // Update preview image
            const previewImg = document.getElementById('previewImage');
            if (previewImg && currentPhoto) {
                updateDebug('Setting image src to: ' + currentPhoto.thumb);
                previewImg.src = currentPhoto.thumb;
                previewImg.onerror = function() {
                    updateDebug('ERROR: Failed to load image: ' + currentPhoto.thumb);
                };
                previewImg.onload = function() {
                    updateDebug('SUCCESS: Image loaded: ' + currentPhoto.thumb);
                };
            }
            
            // Update photo info
            const photoInfo = document.getElementById('photoInfo');
            if (photoInfo && currentPhoto) {
                photoInfo.innerHTML = `<span class="gallery-source">From <a href="${currentPhoto.galleryUrl}">${currentPhoto.gallery}</a> gallery</span>`;
            }
            
            // Update lightbox if it's open
            if (document.getElementById('lightbox').style.display === 'block') {
                document.getElementById('lightbox-img').src = currentPhoto.full;
                updateLightboxCaption();
            }
        }

        // Open lightbox from preview
        function openLightboxFromPreview() {
            updateDebug('openLightboxFromPreview called');
            
            if (!currentPhoto) {
                updateDebug('ERROR: No currentPhoto set');
                return;
            }
            
            updateDebug('Opening lightbox with: ' + currentPhoto.full);
            
            const lightboxImg = document.getElementById('lightbox-img');
            if (lightboxImg) {
                lightboxImg.src = currentPhoto.full;
            }
            
            document.getElementById('lightbox').style.display = 'block';
            document.body.style.overflow = 'hidden';
            updateLightboxCaption();
        }

        // Update lightbox caption
        function updateLightboxCaption() {
            if (!currentPhoto) return;
            
            const captionElement = document.getElementById('lightboxCaption');
            if (!captionElement) return;
            
            let captionHTML = '';
            
            if (currentPhoto.caption) {
                captionHTML += currentPhoto.caption + '<br><br>';
            }
            
            captionHTML += `<span class="gallery-source">From <a href="${currentPhoto.galleryUrl}">${currentPhoto.gallery}</a> gallery</span>`;
            
            captionElement.innerHTML = captionHTML;
        }

        // Close lightbox
        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Close lightbox when clicking background
        function closeLightboxOnBackground(event) {
            if (event.target.id === 'lightbox') {
                closeLightbox();
            }
        }

        // Font toggle functionality
        function toggleFont() {
            const body = document.body;
            const button = document.getElementById('fontToggle');
            
            if (body.classList.contains('dyslexic-font')) {
                body.classList.remove('dyslexic-font');
                button.textContent = 'Dyslexic? Friendly Font Here!';
            } else {
                body.classList.add('dyslexic-font');
                button.textContent = 'Standard Font';
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('lightbox').style.display === 'block') {
                if (e.key === 'Escape') {
                    closeLightbox();
                } else if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                    showRandomPhoto();
                }
            }
        });
        
        // Final debug check
        updateDebug('=== Script Loaded Complete ===');
    </script>
</body>
</html>
